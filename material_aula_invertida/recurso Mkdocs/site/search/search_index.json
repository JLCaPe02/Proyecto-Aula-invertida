{"config":{"lang":["es"],"separator":"[\\s\\-,:!=\\[\\]()\"/]+|(?!\\b)(?=[A-Z][a-z])|\\.(?!\\d)|&[lg]t;","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Bienvenida","text":""},{"location":"#administracion-de-servicios-de-correo-electronico","title":"Administraci\u00f3n de Servicios de Correo Electr\u00f3nico","text":"<p>Bienvenido a la documentaci\u00f3n t\u00e9cnica profesional sobre administraci\u00f3n de servicios de correo electr\u00f3nico en entornos de red empresariales. Este material constituye una gu\u00eda completa que aborda desde los fundamentos te\u00f3ricos hasta las t\u00e9cnicas avanzadas de seguridad y diagn\u00f3stico necesarias para comprender, desplegar y mantener infraestructuras de mensajer\u00eda robustas y seguras.</p>"},{"location":"#estructura-del-curso","title":"Estructura del Curso","text":"<p>El contenido est\u00e1 organizado en m\u00f3dulos progresivos que cubren todos los aspectos fundamentales de los sistemas de correo electr\u00f3nico:</p> <pre><code>flowchart TD\n    A[Inicio] --&gt; B[Conceptos B\u00e1sicos]\n    B --&gt; C[Arquitectura y Protocolos]\n    C --&gt; D[Arquitectura del Sistema]\n    C --&gt; E[Protocolos de Comunicaci\u00f3n]\n    D --&gt; F[Infraestructura]\n    E --&gt; F\n    F --&gt; G[DNS y Correo]\n    F --&gt; H[Administraci\u00f3n y Diagn\u00f3stico]\n    G --&gt; I[Seguridad]\n    H --&gt; I\n    I --&gt; J[Seguridad y Autenticaci\u00f3n]\n\n    style A fill:#26a69a,stroke:#00695c,color:#fff\n    style B fill:#5c6bc0,stroke:#3949ab,color:#fff\n    style C fill:#5c6bc0,stroke:#3949ab,color:#fff\n    style F fill:#5c6bc0,stroke:#3949ab,color:#fff\n    style I fill:#5c6bc0,stroke:#3949ab,color:#fff\n    style J fill:#26a69a,stroke:#00695c,color:#fff</code></pre>"},{"location":"#objetivos-de-aprendizaje","title":"Objetivos de Aprendizaje","text":"<p>Prop\u00f3sito del Material Did\u00e1ctico</p> <p>Este curso tiene como objetivos:</p> <ul> <li>Comprender la arquitectura cliente-servidor aplicada a sistemas de mensajer\u00eda</li> <li>Dominar los protocolos est\u00e1ndar de comunicaci\u00f3n (SMTP, IMAP, POP3)</li> <li>Analizar las dependencias de infraestructura de red (DNS, registros MX)</li> <li>Implementar mecanismos de seguridad y autenticaci\u00f3n modernos</li> <li>Diagnosticar problemas mediante interpretaci\u00f3n de logs y c\u00f3digos de estado</li> </ul>"},{"location":"#navegacion-rapida","title":"Navegaci\u00f3n R\u00e1pida","text":"<p>Accede directamente a las secciones principales del curso:</p> <ul> <li> <p> Conceptos B\u00e1sicos</p> <p>Fundamentos del correo electr\u00f3nico, modelo cliente-servidor y caracter\u00edsticas del servicio</p> <p> Ir a Conceptos B\u00e1sicos</p> </li> <li> <p> Arquitectura y Protocolos</p> <p>Agentes del sistema (MUA, MTA, MDA), protocolos de comunicaci\u00f3n y formatos de almacenamiento</p> <p> Ver Arquitectura  Ver Protocolos</p> </li> <li> <p> Infraestructura</p> <p>Registros DNS, configuraci\u00f3n de servidores y herramientas de administraci\u00f3n</p> <p> Ver DNS  Ver Administraci\u00f3n</p> </li> <li> <p> Seguridad</p> <p>Cifrado TLS, autenticaci\u00f3n SPF/DKIM/DMARC y prevenci\u00f3n de spam</p> <p> Ir a Seguridad</p> </li> </ul>"},{"location":"#alcance-de-los-contenidos","title":"Alcance de los Contenidos","text":"<p>El temario abarca los siguientes aspectos te\u00f3ricos y pr\u00e1cticos:</p> Arquitectura Cliente-Servidor Diferenciaci\u00f3n clara de roles entre los distintos agentes: MUA (usuario), MTA (transferencia) y MDA (entrega). Comprensi\u00f3n del flujo completo de un correo electr\u00f3nico desde origen hasta destino. Est\u00e1ndares RFC An\u00e1lisis detallado de los protocolos industriales: SMTP para env\u00edo, POP3 e IMAP para recepci\u00f3n. Comprensi\u00f3n de las diferencias funcionales y casos de uso apropiados. Infraestructura de Red Dependencias cr\u00edticas del Sistema de Nombres de Dominio (DNS): registros MX, A/AAAA, PTR. Configuraci\u00f3n de zonas DNS para servicios de correo. Seguridad y Autenticaci\u00f3n Mecanismos modernos de protecci\u00f3n: cifrado en tr\u00e1nsito (TLS/SSL), validaci\u00f3n de origen (SPF), integridad de mensajes (DKIM), y pol\u00edticas unificadas (DMARC). Gesti\u00f3n y Diagn\u00f3stico Interpretaci\u00f3n profesional de registros del sistema (logs), an\u00e1lisis de c\u00f3digos de estado SMTP, detecci\u00f3n y resoluci\u00f3n de problemas comunes."},{"location":"#metodologia-de-estudio","title":"Metodolog\u00eda de Estudio","text":"<p>Recomendaciones para el Aprendizaje</p> <p>Para aprovechar al m\u00e1ximo este material:</p> <ol> <li>Seguir el orden propuesto: Los m\u00f3dulos est\u00e1n dise\u00f1ados para construir conocimiento progresivamente</li> <li>Practicar con ejemplos: Cada secci\u00f3n incluye casos pr\u00e1cticos y configuraciones reales</li> <li>Experimentar en entornos de prueba: Se recomienda configurar laboratorios virtuales para validar los conceptos</li> </ol>"},{"location":"#informacion-del-curso","title":"Informaci\u00f3n del Curso","text":"<p>Autores: Teodoro Sib\u00f3n Jim\u00e9nez y Jos\u00e9 Luis Cabello P\u00e9rez A\u00f1o: 2026 Nivel: T\u00e9cnico Superior \u00c1rea: Administraci\u00f3n de Sistemas Inform\u00e1ticos en Red</p> <p>Nota sobre el Material</p> <p>Este documento forma parte del material did\u00e1ctico oficial para la formaci\u00f3n en administraci\u00f3n de sistemas de red. Todo el contenido se basa en est\u00e1ndares industriales reconocidos y documentaci\u00f3n t\u00e9cnica verificada.</p>"},{"location":"administracion/","title":"Administraci\u00f3n y Diagn\u00f3stico de Servidores de Correo","text":""},{"location":"administracion/#introduccion","title":"Introducci\u00f3n","text":"<p>La administraci\u00f3n profesional de un servidor de correo Linux requiere conocimientos sobre  la estructura de configuraci\u00f3n del software MTA/MDA y la capacidad de interpretar registros del sistema (logs) para diagnosticar y resolver problemas eficientemente.</p>"},{"location":"administracion/#estructura-de-configuracion","title":"Estructura de Configuraci\u00f3n","text":""},{"location":"administracion/#postfix-mta","title":"Postfix (MTA)","text":"<p>Postfix es el MTA m\u00e1s utilizado en entornos Linux modernos debido a su equilibrio entre seguridad, rendimiento y facilidad de configuraci\u00f3n.</p>"},{"location":"administracion/#archivo-principal-maincf","title":"Archivo Principal: main.cf","text":"<p>Ubicaci\u00f3n: <code>/etc/postfix/main.cf</code></p> <p>Par\u00e1metros cr\u00edticos:</p> <pre><code># Identidad del servidor\nmyhostname = mail.ejemplo.com\nmydomain = ejemplo.com\nmyorigin = $mydomain\n\n# Redes de confianza - CR\u00cdTICO PARA SEGURIDAD\nmynetworks = 127.0.0.0/8 [::1]/128 192.168.1.0/24\n\n# Destinos locales\nmydestination = $myhostname, localhost.$mydomain, localhost, $mydomain\n\n# Formato de buz\u00f3n\nhome_mailbox = Maildir/\n\n# Restricciones de recepci\u00f3n (antispam)\nsmtpd_recipient_restrictions =\n    permit_mynetworks,\n    permit_sasl_authenticated,\n    reject_unauth_destination,\n    reject_invalid_hostname,\n    reject_non_fqdn_recipient,\n    reject_unknown_recipient_domain\n\n# Tama\u00f1o m\u00e1ximo de mensaje (50MB)\nmessage_size_limit = 52428800\n\n# TLS para conexiones entrantes\nsmtpd_tls_cert_file = /etc/ssl/certs/mail.ejemplo.com.pem\nsmtpd_tls_key_file = /etc/ssl/private/mail.ejemplo.com.key\nsmtpd_use_tls = yes\nsmtpd_tls_security_level = may\n\n# TLS para conexiones salientes\nsmtp_tls_security_level = may\nsmtp_tls_loglevel = 1\n</code></pre> <p>Peligro: Open Relay</p> <p>NUNCA configurar <code>mynetworks</code> como <code>0.0.0.0/0</code>. Esto convierte el servidor en un Open Relay, permitiendo a spammers enviar correo masivo a trav\u00e9s de su infraestructura.</p> <p>Incorrecto: <pre><code>mynetworks = 0.0.0.0/0  # \u00a1PELIGRO!\n</code></pre></p> <p>Correcto: <pre><code>mynetworks = 127.0.0.0/8 [::1]/128 192.168.1.0/24\n</code></pre></p>"},{"location":"administracion/#comandos-de-gestion-postfix","title":"Comandos de Gesti\u00f3n Postfix","text":"<pre><code># Verificar configuraci\u00f3n\npostconf -n\n\n# Comprobar fichero de configuraci\u00f3n\npostfix check\n\n# Recargar configuraci\u00f3n (sin interrumpir servicio)\npostfix reload\n\n# Reiniciar servicio\nsystemctl restart postfix\n\n# Ver estado del servicio\nsystemctl status postfix\n\n# Ver cola de correos\npostqueue -p\n\n# Forzar procesamiento de cola\npostqueue -f\n\n# Eliminar un correo espec\u00edfico de la cola\npostsuper -d ID_CORREO\n\n# Vaciar toda la cola\npostsuper -d ALL\n</code></pre>"},{"location":"administracion/#dovecot-mdaimap","title":"Dovecot (MDA/IMAP)","text":"<p>Dovecot es el servidor IMAP/POP3 est\u00e1ndar actual, tambi\u00e9n funciona como MDA.</p>"},{"location":"administracion/#estructura-de-configuracion_1","title":"Estructura de Configuraci\u00f3n","text":"<p>Ubicaci\u00f3n: <code>/etc/dovecot/dovecot.conf</code> (archivo principal) M\u00f3dulos: <code>/etc/dovecot/conf.d/</code> (configuraci\u00f3n modular)</p> <p>Archivos clave:</p> 10-mail.conf Ubicaci\u00f3n y formato de buzones <pre><code>mail_location = maildir:~/Maildir\nmail_privileged_group = mail\n</code></pre> 10-auth.conf Mecanismos de autenticaci\u00f3n <pre><code>disable_plaintext_auth = yes\nauth_mechanisms = plain login\n</code></pre> 10-ssl.conf Configuraci\u00f3n TLS/SSL <pre><code>ssl = required\nssl_cert = &lt;/etc/ssl/certs/dovecot.pem\nssl_key = &lt;/etc/ssl/private/dovecot.key\nssl_min_protocol = TLSv1.2\n</code></pre> 10-master.conf Sockets y servicios"},{"location":"administracion/#comandos-de-gestion-dovecot","title":"Comandos de Gesti\u00f3n Dovecot","text":"<pre><code># Verificar configuraci\u00f3n\ndoveconf -n\n\n# Recargar configuraci\u00f3n\ndoveadm reload\n\n# Ver usuarios conectados\ndoveadm who\n\n# Expurgar mensajes eliminados\ndoveadm expunge -u usuario@ejemplo.com mailbox INBOX all\n\n# Ver cuota de usuario\ndoveadm quota get -u usuario@ejemplo.com\n</code></pre>"},{"location":"administracion/#diagnostico-y-logs","title":"Diagn\u00f3stico y Logs","text":""},{"location":"administracion/#ubicacion-de-logs","title":"Ubicaci\u00f3n de Logs","text":"Sistema basado en Debian/Ubuntu <code>/var/log/mail.log</code> <code>/var/log/mail.err</code> Sistema basado en RedHat/CentOS <code>/var/log/maillog</code> Systemd journal <code>journalctl -u postfix -f</code> <code>journalctl -u dovecot -f</code>"},{"location":"administracion/#codigos-de-estado-smtp","title":"C\u00f3digos de Estado SMTP","text":"<p>Al analizar logs, es fundamental interpretar los c\u00f3digos de respuesta SMTP de tres d\u00edgitos:</p>"},{"location":"administracion/#tabla-completa-de-codigos","title":"Tabla Completa de C\u00f3digos","text":"C\u00f3digo Significado Descripci\u00f3n Acci\u00f3n del Emisor 2xx \u00c9xito Comando aceptado correctamente Ninguna 220 Service ready Servidor listo para conexi\u00f3n Continuar 221 Closing connection Cierre normal Terminar 250 OK Acci\u00f3n completada Continuar 251 User not local Usuario no local, reenv\u00edo Aceptar 3xx Intermedio Comando aceptado, se necesita m\u00e1s informaci\u00f3n Enviar datos 354 Start mail input Comenzar a enviar datos Enviar mensaje 4xx Error Temporal Fallo transitorio, reintentar m\u00e1s tarde Encolar y reintentar 421 Service not available Servicio temporalmente no disponible Reintentar despu\u00e9s 450 Mailbox unavailable Buz\u00f3n ocupado temporalmente Reintentar despu\u00e9s 451 Action aborted Error local en procesamiento Reintentar despu\u00e9s 452 Insufficient storage Insuficiente espacio en disco Reintentar despu\u00e9s 5xx Error Permanente Fallo fatal, no reintentar Generar bounce 500 Syntax error Comando no reconocido Reportar error 501 Syntax error in parameters Par\u00e1metros incorrectos Reportar error 502 Command not implemented Comando no implementado Reportar error 550 Mailbox unavailable Usuario no encontrado Bounce al remitente 551 User not local Usuario no local, sin reenv\u00edo Bounce al remitente 552 Exceeded storage Cuota de buz\u00f3n excedida Bounce al remitente 553 Mailbox name invalid Nombre de buz\u00f3n inv\u00e1lido Bounce al remitente 554 Transaction failed Transacci\u00f3n fallida Bounce al remitente <p>Clasificaci\u00f3n de C\u00f3digos</p> <ul> <li>2xx: Todo OK, continuar</li> <li>3xx: Esperando m\u00e1s informaci\u00f3n</li> <li>4xx: Error temporal, reintentar autom\u00e1ticamente</li> <li>5xx: Error permanente, NO reintentar, notificar al remitente</li> </ul>"},{"location":"administracion/#ejemplos-de-analisis-de-logs","title":"Ejemplos de An\u00e1lisis de Logs","text":""},{"location":"administracion/#ejemplo-1-entrega-exitosa","title":"Ejemplo 1: Entrega Exitosa","text":"<pre><code>Feb 06 11:30:15 mail postfix/smtpd[1234]: connect from cliente.ejemplo.com[192.0.2.50]\nFeb 06 11:30:15 mail postfix/smtpd[1234]: 3A4F51234: client=cliente.ejemplo.com[192.0.2.50]\nFeb 06 11:30:16 mail postfix/cleanup[1235]: 3A4F51234: message-id=&lt;20260206103015.3A4F51234@mail.ejemplo.com&gt;\nFeb 06 11:30:16 mail postfix/qmgr[1020]: 3A4F51234: from=&lt;usuario@origen.com&gt;, size=1234, nrcpt=1\nFeb 06 11:30:16 mail postfix/smtp[1236]: 3A4F51234: to=&lt;destino@ejemplo.com&gt;, relay=mail.destino.com[198.51.100.50]:25, status=sent (250 OK)\nFeb 06 11:30:16 mail postfix/qmgr[1020]: 3A4F51234: removed\n</code></pre> <p>Interpretaci\u00f3n: Correo recibido de <code>usuario@origen.com</code>, procesado y entregado exitosamente a <code>destino@ejemplo.com</code>. C\u00f3digo 250 indica \u00e9xito.</p>"},{"location":"administracion/#ejemplo-2-usuario-no-encontrado-5xx","title":"Ejemplo 2: Usuario No Encontrado (5xx)","text":"<pre><code>Feb 06 11:35:20 mail postfix/smtp[1240]: 4B5G62345: to=&lt;noexiste@ejemplo.com&gt;, relay=mail.ejemplo.com[192.0.2.10]:25, status=bounced (550 5.1.1 User unknown)\n</code></pre> <p>Interpretaci\u00f3n: Error permanente 550 - el usuario no existe. El correo ser\u00e1 devuelto al remitente (bounce).</p>"},{"location":"administracion/#ejemplo-3-disco-lleno-4xx","title":"Ejemplo 3: Disco Lleno (4xx)","text":"<pre><code>Feb 06 12:00:30 mail postfix/smtp[1250]: 5C6H73456: to=&lt;usuario@ejemplo.com&gt;, relay=mail.ejemplo.com[192.0.2.10]:25, status=deferred (452 4.2.2 Mailbox full)\n</code></pre> <p>Interpretaci\u00f3n: Error temporal 452 - buz\u00f3n lleno. Postfix reintentar\u00e1 autom\u00e1ticamente (deferred).</p>"},{"location":"administracion/#flujo-de-troubleshooting","title":"Flujo de Troubleshooting","text":"<pre><code>flowchart TD\n    A[Problema reportado] --&gt; B{\u00bfEl servicio&lt;br/&gt;est\u00e1 activo?}\n    B --&gt;|No| C[systemctl start postfix/dovecot]\n    B --&gt;|S\u00ed| D{\u00bfLleg\u00f3 al&lt;br/&gt;servidor?}\n    D --&gt;|No|E[Verificar DNS MX]\n    E --&gt; F[Verificar firewall]\n    F --&gt; G[Verificar conectividad de red]\n    D --&gt;|S\u00ed| H{\u00bfEn logs&lt;br/&gt;hay errores?}\n    H --&gt;|5xx| I[Usuario no existe&lt;br/&gt;o rechazado por filtros]\n    H --&gt;|4xx| J[Problema temporal&lt;br/&gt;disco/cuota/carga]\n    H --&gt;|Sin errores| K[Verificar filtros&lt;br/&gt;spam del cliente]\n    I --&gt; L[Corregir configuraci\u00f3n]\n    J --&gt; M[Resolver recurso]\n    K --&gt; N[Ajustar filtros]\n\n    style C fill:#26a69a,stroke:#00695c,color:#fff\n    style L fill:#ffa726,stroke:#f57c00,color:#fff\n    style M fill:#ffa726,stroke:#f57c00,color:#fff\n    style N fill:#5c6bc0,stroke:#3949ab,color:#fff</code></pre>"},{"location":"administracion/#comandos-esenciales-de-diagnostico","title":"Comandos Esenciales de Diagn\u00f3stico","text":""},{"location":"administracion/#verificacion-de-conectividad","title":"Verificaci\u00f3n de Conectividad","text":"<pre><code># Probar conexi\u00f3n SM TP\ntelnet mail.ejemplo.com 25\n\n# Probar SMTP con STARTTLS\nopenssl s_client -connect mail.ejemplo.com:587 -starttls smtp\n\n# Probar IMAP\ntelnet mail.ejemplo.com 143\n\n# Probar IMAPS (TLS)\nopenssl s_client -connect mail.ejemplo.com:993\n</code></pre>"},{"location":"administracion/#analisis-de-logs-en-tiempo-real","title":"An\u00e1lisis de Logs en Tiempo Real","text":"<pre><code># Seguir log de correo\ntail -f /var/log/mail.log\n\n# Filtrar solo errores\ngrep -i error /var/log/mail.log\n\n# Buscar correo espec\u00edfico por ID\ngrep \"3A4F51234\" /var/log/mail.log\n\n# Filtrar por remitente\ngrep \"from=&lt;usuario@ejemplo.com&gt;\" /var/log/mail.log\n\n# Ver intentos de conexi\u00f3n rechazados\ngrep \"reject\" /var/log/mail.log\n</code></pre>"},{"location":"administracion/#verificacion-de-servicios","title":"Verificaci\u00f3n de Servicios","text":"<pre><code># Ver puertos en escucha\nnetstat -tulpn | grep -E \"25|587|143|993\"\n\n# o con ss (m\u00e1s moderno)\nss -tulpn | grep -E \"25|587|143|993\"\n\n# Verificar procesos\nps aux | grep postfix\nps aux | grep dovecot\n</code></pre>"},{"location":"administracion/#mejores-practicas-de-administracion","title":"Mejores Pr\u00e1cticas de Administraci\u00f3n","text":"<p>Recomendaciones</p> <p>Monitoreo:</p> <ul> <li>Implementar alertas para cola de correo grande (<code>postqueue -p</code>)</li> <li>Monitorear espacio en disco (buzones pueden crecer r\u00e1pidamente)</li> <li>Configurar logrotate para logs de correo</li> </ul> <p>Seguridad:</p> <ul> <li>Revisar peri\u00f3dicamente <code>mynetworks</code> en Postfix</li> <li>Mantener actualizado el software (Postfix, Dovecot)</li> <li>Analizar logs en busca de intentos de relay no autorizado</li> <li>Implementar fail2ban para bloquear IPs con intentos de login fallidos</li> </ul> <p>Mantenimiento:</p> <ul> <li>Backup regular de buzones de usuario</li> <li>Limpieza peri\u00f3dica de mensajes en cuarentena</li> <li>Rotaci\u00f3n de logs</li> <li>Actualizaci\u00f3n de certificados TLS antes de expiraci\u00f3n</li> </ul>"},{"location":"administracion/#proximos-pasos","title":"Pr\u00f3ximos Pasos","text":"<p>Para completar su conocimiento:</p> <ul> <li>Revise Seguridad para configurar SPF, DKIM y DMARC</li> <li>Practique en un entorno de laboratorio antes de aplicar cambios en producci\u00f3n</li> </ul>"},{"location":"arquitectura/","title":"Arquitectura del Sistema de Correo Electr\u00f3nico","text":""},{"location":"arquitectura/#introduccion","title":"Introducci\u00f3n","text":"<p>El flujo de un correo electr\u00f3nico no es una conexi\u00f3n punto a punto directa entre dos personas, sino una cadena de relevos procesada por distintos tipos de software especializado. Comprender la arquitectura del sistema es fundamental para administrar, diagnosticar y optimizar servicios de correo.</p> <pre><code>sequenceDiagram\n    participant U1 as Usuario Origen\n    participant MUA1 as MUA Origen\n    participant MTA1 as MTA Origen\n    participant DNS as Servidor DNS\n    participant MTA2 as MTA Destino\n    participant MDA as MDA\n    participant Buz\u00f3n as Buz\u00f3n Usuario\n    participant MUA2 as MUA Destino\n    participant U2 as Usuario Destino\n\n    U1-&gt;&gt;MUA1: Redacta correo\n    MUA1-&gt;&gt;MTA1: Env\u00eda via SMTP\n    MTA1-&gt;&gt;DNS: Consulta registro MX\n    DNS--&gt;&gt;MTA1: Devuelve servidor destino\n    MTA1-&gt;&gt;MTA2: Transfiere via SMTP\n    MTA2-&gt;&gt;MDA: Entrega mensaje\n    MDA-&gt;&gt;Buz\u00f3n: Almacena en disco\n    U2-&gt;&gt;MUA2: Solicita correos\n    MUA2-&gt;&gt;Buz\u00f3n: Consulta via IMAP/POP3\n    Buz\u00f3n--&gt;&gt;MUA2: Devuelve mensajes\n    MUA2--&gt;&gt;U2: Muestra correos</code></pre>"},{"location":"arquitectura/#agentes-del-sistema","title":"Agentes del Sistema","text":"<p>El ecosistema del correo electr\u00f3nico se compone de tres tipos principales de agentes software, cada uno con responsabilidades espec\u00edficas:</p>"},{"location":"arquitectura/#mua-mail-user-agent","title":"MUA (Mail User Agent)","text":"<p>Definici\u00f3n: Es el agente de usuario, la aplicaci\u00f3n cliente que interact\u00faa directamente con el usuario final.</p> <p>Funcionalidades:</p> <ul> <li>Permite redactar, enviar y visualizar correos electr\u00f3nicos</li> <li>Proporciona interfaz gr\u00e1fica o web para gesti\u00f3n de mensajes</li> <li>No almacena ni gestiona el tr\u00e1nsito del correo por Internet</li> <li>Solo interact\u00faa con los servidores inicial (env\u00edo) o final (recepci\u00f3n)</li> </ul> <p>Ejemplos de implementaci\u00f3n:</p> <ul> <li>Clientes de escritorio: Mozilla Thunderbird, Microsoft Outlook, Apple Mail</li> <li>Clientes web (Webmail): Roundcube, SquirrelMail, Zimbra</li> <li>Clientes m\u00f3viles: K-9 Mail (Android), Mail nativa (iOS)</li> </ul> <p>MUA y Protocolos</p> <p>Los MUA utilizan SMTP para enviar correos al servidor y IMAP o POP3 para recuperarlos. El usuario final nunca interact\u00faa directamente con estos protocolos; el MUA los gestiona de forma transparente.</p>"},{"location":"arquitectura/#mta-mail-transfer-agent","title":"MTA (Mail Transfer Agent)","text":"<p>Definici\u00f3n: Es el servidor de transferencia, el componente central que act\u00faa como \"enrutador\" del correo electr\u00f3nico.</p> <p>Funciones principales:</p> <ol> <li>Recepci\u00f3n: Acepta mensajes de MUA o de otros MTA</li> <li>Enrutamiento: Decide el siguiente salto bas\u00e1ndose en el dominio de destino</li> <li>Transferencia: Transmite el correo al MTA destino o lo entrega localmente</li> <li>Encolado: Almacena temporalmente mensajes que no pueden entregarse inmediatamente</li> <li>Reintentos: Programaci\u00f3n autom\u00e1tica de reenv\u00edos en caso de fallos temporales</li> </ol> <p>Proceso de decisi\u00f3n del MTA:</p> <pre><code>flowchart TD\n    A[MTA recibe correo] --&gt; B{\u00bfDominio destino&lt;br/&gt;es local?}\n    B --&gt;|S\u00ed| C[Entrega a MDA local]\n    B --&gt;|No| D[Consulta DNS para MX]\n    D --&gt; E[Conecta con MTA destino]\n    E --&gt; F{\u00bfConexi\u00f3n&lt;br/&gt;exitosa?}\n    F --&gt;|S\u00ed| G[Transfiere mensaje via SMTP]\n    F --&gt;|No| H[Encola mensaje]\n    H --&gt; I[Programa reintento]\n    I --&gt; J{\u00bfA\u00fan dentro del&lt;br/&gt;tiempo l\u00edmite?}\n    J --&gt;|S\u00ed| E\n    J --&gt;|No| K[Devuelve bounce al remitente]\n\n    style C fill:#26a69a,stroke:#00695c,color:#fff\n    style G fill:#26a69a,stroke:#00695c,color:#fff\n    style K fill:#ef5350,stroke:#c62828,color:#fff</code></pre> <p>Software MTA m\u00e1s utilizado:</p> Software Caracter\u00edsticas Uso t\u00edpico Postfix Modular, seguro, alto rendimiento Servidores empresariales y proveedores Exim Flexible, altamente configurable Hosting compartido, sistemas Debian Sendmail Hist\u00f3rico, muy complejo Sistemas legacy Microsoft Exchange Integrado con Active Directory Entornos corporativos Windows <p>Recomendaci\u00f3n para Nuevas Instalaciones</p> <p>Postfix es actualmente el MTA m\u00e1s recomendado por su equilibrio entre seguridad, rendimiento y facilidad de configuraci\u00f3n. Es el MTA por defecto en la mayor\u00eda de distribuciones Linux modernas.</p>"},{"location":"arquitectura/#mda-mail-delivery-agent","title":"MDA (Mail Delivery Agent)","text":"<p>Definici\u00f3n: Es el agente de entrega local. Una vez el correo ha llegado al servidor de destino final, el MTA transfiere el mensaje al MDA para su almacenamiento.</p> <p>Responsabilidades:</p> <ul> <li>Escritura en disco: Almacena el mensaje en el buz\u00f3n del usuario</li> <li>Filtrado local: Aplica reglas del usuario (filtros Sieve, carpetas autom\u00e1ticas)</li> <li>Gesti\u00f3n de cuotas: Controla el espacio en disco asignado por usuario</li> <li>Indexaci\u00f3n: Facilita b\u00fasquedas r\u00e1pidas en buzones grandes</li> </ul> <p>Software MDA representativo:</p> <ul> <li>Dovecot: MDA/IMAP moderno, est\u00e1ndar de facto actual</li> <li>Courier: Suite completa MDA/IMAP/POP3</li> <li>Cyrus IMAP: Orientado a grandes instalaciones</li> </ul> <p>Integraci\u00f3n MTA/MDA:</p> <pre><code>graph LR\n    A[Internet] --&gt; B[Postfix&lt;br/&gt;MTA]\n    B --&gt; C{Usuario&lt;br/&gt;existe?}\n    C --&gt;|S\u00ed| D[Dovecot&lt;br/&gt;MDA/LMTP]\n    C --&gt;|No| E[Rechazar 550]\n    D --&gt; F[Buz\u00f3n en&lt;br/&gt;/var/mail]\n\n    style B fill:#26a69a,stroke:#00695c,color:#fff\n    style D fill:#ab47bc,stroke:#7b1fa2,color:#fff\n    style E fill:#ef5350,stroke:#c62828,color:#fff\n    style F fill:#5c6bc0,stroke:#3949ab,color:#fff</code></pre>"},{"location":"arquitectura/#formatos-de-almacenamiento-buzones","title":"Formatos de Almacenamiento (Buzones)","text":"<p>Existen dos est\u00e1ndares principales para almacenar los correos en el disco duro del servidor Linux. La elecci\u00f3n del formato impacta directamente en el rendimiento, fiabilidad y capacidad de recuperaci\u00f3n ante fallos.</p> mbox (Cl\u00e1sico)Maildir (Moderno) <p>Estructura: Todos los correos de un usuario se concatenan en un \u00fanico archivo de texto plano.</p> <p>Ubicaci\u00f3n t\u00edpica: <code>/var/mail/usuario</code> o <code>/var/spool/mail/usuario</code></p> <p>Formato interno: <pre><code>From usuario@ejemplo.com Mon Jan 01 12:00:00 2026\nFrom: usuario@ejemplo.com\nTo: destino@ejemplo.com\nSubject: Primer mensaje\n\nCuerpo del mensaje 1\n\nFrom usuario@ejemplo.com Mon Jan 02 13:00:00 2026\nFrom: usuario@ejemplo.com\nTo: otro@ejemplo.com\nSubject: Segundo mensaje\n\nCuerpo del mensaje 2\n</code></pre></p> <p>Ventajas:</p> <ul> <li>Sencillez extrema en su implementaci\u00f3n</li> <li>Compatible con utilidades UNIX tradicionales (grep, less, cat)</li> <li>Consume menos inodos del sistema de archivos</li> </ul> <p>Desventajas:</p> <ul> <li>Bloqueo de archivos: M\u00faltiples procesos no pueden escribir simult\u00e1neamente de forma segura</li> <li>Corrupci\u00f3n total: Si el archivo se corrompe, se pierden todos los correos</li> <li>Bajo rendimiento: Con buzones grandes (miles de mensajes), las operaciones son lentas</li> <li>Sin soporte para flags: Dif\u00edcil marcar mensajes individuales como le\u00eddos/no le\u00eddos</li> </ul> <p>Estructura: Utiliza una estructura de directorios. Cada correo es un archivo individual con nombre \u00fanico.</p> <p>Organizaci\u00f3n de carpetas: <pre><code>~/Maildir/\n\u251c\u2500\u2500 cur/          # Mensajes ya visualizados\n\u251c\u2500\u2500 new/          # Mensajes no le\u00eddos\n\u2514\u2500\u2500 tmp/          # \u00c1rea temporal durante la escritura\n</code></pre></p> <p>Nomenclatura de archivos: <pre><code>1609459200.Vfd01I4000dM123456.servidor.ejemplo.com:2,S\n\u2514\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u252c\u2518\n      \u2502               \u2502                    \u2502         \u2502\n  timestamp      identificador         hostname   flags\n</code></pre></p> <p>Ventajas:</p> <ul> <li>Alta fiabilidad: Si un archivo falla, solo se pierde un correo</li> <li>Sin bloqueos: No requiere bloqueos de archivo, ideal para servidores con alta concurrencia</li> <li>Rendimiento escalable: Operaciones r\u00e1pidas incluso con decenas de miles de mensajes</li> <li>Soporte de flags: Estados (le\u00eddo, respondido, eliminado) mediante sufijos en nombres de archivo</li> <li>Backup incremental eficiente: Cada correo es un fichero separado</li> </ul> <p>Desventajas:</p> <ul> <li>Mayor consumo de inodos (limitaci\u00f3n en algunos sistemas de archivos)</li> <li>Estructura de directorios m\u00e1s compleja</li> </ul> <p>Recomendaci\u00f3n Actual</p> <p>Maildir es el est\u00e1ndar recomendado para todas las instalaciones modernas. Es utilizado por defecto en Dovecot y soportado por todos los MTA actuales.</p>"},{"location":"arquitectura/#comparativa-de-formatos","title":"Comparativa de Formatos","text":"Criterio mbox Maildir Estructura Un archivo \u00fanico Un directorio por buz\u00f3n Granularidad Todos los correos concatenados Un archivo por correo Concurrencia Requiere locks, bajo rendimiento Sin locks, alta concurrencia Fiabilidad Corrupci\u00f3n afecta todo el buz\u00f3n Corrupci\u00f3n afecta un solo mensaje Rendimiento con buzones grandes Muy bajo Excelente Soporte de flags IMAP Limitado Completo Uso actual Legacy, sistemas antiguos Est\u00e1ndar moderno"},{"location":"arquitectura/#flujo-completo-de-un-correo","title":"Flujo Completo de un Correo","text":"<p>Integrando todos los componentes, el flujo completo es:</p> <pre><code>graph TD\n    A[Usuario escribe correo] --&gt; B[MUA del remitente]\n    B --&gt;|SMTP autenticado| C[MTA origen]\n    C --&gt;|Consulta| D[DNS - Registro MX]\n    D --&gt;|Responde IP del servidor| C\n    C --&gt;|SMTP p\u00fablico| E[MTA destino]\n    E --&gt;|LMTP/LDA| F[MDA destino]\n    F --&gt;|Escribe| G[Maildir del usuario]\n    G &lt;--&gt;|IMAP/POP3| H[MUA del destinatario]\n    H --&gt; I[Usuario lee correo]\n\n    style B fill:#5c6bc0,stroke:#3949ab,color:#fff\n    style C fill:#26a69a,stroke:#00695c,color:#fff\n    style D fill:#ffa726,stroke:#f57c00,color:#fff\n    style E fill:#26a69a,stroke:#00695c,color:#fff\n    style F fill:#ab47bc,stroke:#7b1fa2,color:#fff\n    style H fill:#5c6bc0,stroke:#3949ab,color:#fff</code></pre>"},{"location":"arquitectura/#proximos-pasos","title":"Pr\u00f3ximos Pasos","text":"<p>Ahora que comprendes la arquitectura, es momento de profundizar en los protocolos de comunicaci\u00f3n:</p> <ul> <li>Explora Protocolos de Comunicaci\u00f3n para entender SMTP, IMAP y POP3 en detalle</li> <li>Descubre c\u00f3mo DNS gestiona el correo mediante registros MX</li> <li>Aprende sobre Seguridad con SPF, DKIM y DMARC</li> </ul>"},{"location":"conceptos_base/","title":"Conceptos B\u00e1sicos del Correo Electr\u00f3nico","text":""},{"location":"conceptos_base/#definicion-del-servicio","title":"Definici\u00f3n del Servicio","text":"<p>El correo electr\u00f3nico es un servicio de red que permite a los usuarios enviar y recibir mensajes mediante sistemas de comunicaci\u00f3n electr\u00f3nica. A diferencia de la mensajer\u00eda instant\u00e1nea, donde ambas partes deben estar conectadas simult\u00e1neamente, el correo electr\u00f3nico es intr\u00ednsecamente as\u00edncrono.</p>"},{"location":"conceptos_base/#caracteristicas-fundamentales","title":"Caracter\u00edsticas Fundamentales","text":"<p>El dise\u00f1o del correo electr\u00f3nico se basa en tres pilares fundamentales que lo diferencian de otros sistemas de comunicaci\u00f3n:</p> Asincron\u00eda El emisor y el receptor no requieren estar conectados simult\u00e1neamente. Los servidores intermedios almacenan el mensaje (t\u00e9cnica conocida como store-and-forward) hasta su entrega final. Esto permite enviar correos a cualquier hora, independientemente de si el destinatario est\u00e1 en l\u00ednea. Estandarizaci\u00f3n Su funcionamiento no depende de un software propietario, sino de protocolos abiertos y p\u00fablicos definidos en RFCs (Request for Comments). Esto garantiza la interoperabilidad: un usuario de Gmail puede comunicarse sin problemas con uno de Outlook o con un servidor corporativo auto-hospedado. Identidad \u00danica Los usuarios se identifican mediante una direcci\u00f3n de correo electr\u00f3nico \u00fanica formada por la estructura can\u00f3nica: <code>usuario@dominio</code>. Esta direcci\u00f3n es globalmente\u00fanica y permite enrutar el mensaje a trav\u00e9s de Internet hacia el servidor correcto."},{"location":"conceptos_base/#el-modelo-de-red","title":"El Modelo de Red","text":"<p>El servicio de correo electr\u00f3nico opera bajo el modelo arquitect\u00f3nico Cliente-Servidor sobre la pila de protocolos TCP/IP. Este modelo garantiza la fiabilidad en la entrega de datos.</p> <pre><code>graph LR\n    A[Cliente de Correo&lt;br/&gt;MUA] --&gt;|SMTP/IMAP| B[Servidor de Correo&lt;br/&gt;MTA/MDA]\n    B --&gt;|TCP/IP| C[Internet]\n    C --&gt;|TCP/IP| D[Servidor Destino&lt;br/&gt;MTA/MDA]\n    D --&gt;|IMAP/POP3| E[Cliente Destinatario&lt;br/&gt;MUA]\n\n    style A fill:#5c6bc0,stroke:#3949ab,color:#fff\n    style B fill:#26a69a,stroke:#00695c,color:#fff\n    style C fill:#ffa726,stroke:#f57c00,color:#fff\n    style D fill:#26a69a,stroke:#00695c,color:#fff\n    style E fill:#5c6bc0,stroke:#3949ab,color:#fff</code></pre> <p>Fiabilidad TCP</p> <p>El correo electr\u00f3nico utiliza TCP (Transmission Control Protocol) como protocolo de transporte. TCP establece conexiones fiables antes de transmitir cualquier dato, garantizando:</p> <ul> <li>Control de errores: Detecci\u00f3n y retransmisi\u00f3n de paquetes perdidos</li> <li>Orden de entrega: Los datos llegan en el mismo orden en que fueron enviados</li> <li>Control de flujo: Adaptaci\u00f3n a la velocidad del receptor</li> </ul> <p>Esto evita la p\u00e9rdida de paquetes com\u00fan en protocolos sin conexi\u00f3n como UDP, asegurando que los mensajes lleguen \u00edntegros o se notifique un error en caso contrario.</p>"},{"location":"conceptos_base/#componentes-del-sistema","title":"Componentes del Sistema","text":"<p>El ecosistema del correo electr\u00f3nico involucra varios componentes que trabajan coordinadamente:</p> <pre><code>flowchart TD\n    A[Usuario redacta mensaje] --&gt; B[MUA - Mail User Agent]\n    B --&gt; C[MTA - Mail Transfer Agent]\n    C --&gt; D{\u00bfDestinatario local?}\n    D --&gt;|No| E[Env\u00edo SMTP a otro MTA]\n    D --&gt;|S\u00ed| F[MDA - Mail Delivery Agent]\n    E --&gt; G[MTA Destino]\n    G --&gt; F\n    F --&gt; H[Buz\u00f3n del Usuario]\n    H --&gt; I[MUA del Destinatario]\n\n    style B fill:#5c6bc0,stroke:#3949ab,color:#fff\n    style C fill:#26a69a,stroke:#00695c,color:#fff\n    style F fill:#ab47bc,stroke:#7b1fa2,color:#fff</code></pre> <p>Estos componentes se analizan en detalle en la secci\u00f3n de Arquitectura del Sistema.</p>"},{"location":"conceptos_base/#ventajas-del-modelo-asincrono","title":"Ventajas del Modelo As\u00edncrono","text":"<p>Beneficios de la Asincron\u00eda</p> <p>El modelo as\u00edncrono del correo electr\u00f3nico ofrece ventajas significativas:</p> <ul> <li>Disponibilidad 24/7: Los mensajes se env\u00edan y reciben en cualquier momento</li> <li>Tolerancia a fallos: Si el servidor destino no est\u00e1 disponible, el mensaje se encola y se reintenta autom\u00e1ticamente</li> <li>Independencia geogr\u00e1fica: Funciona independientemente de la zona horaria</li> <li>Registro permanente: Los mensajes quedan almacenados para consulta posterior</li> </ul>"},{"location":"conceptos_base/#diferencias-con-otros-servicios-de-mensajeria","title":"Diferencias con Otros Servicios de Mensajer\u00eda","text":"Caracter\u00edstica Correo Electr\u00f3nico Mensajer\u00eda Instant\u00e1nea Sincron\u00eda As\u00edncrono S\u00edncrono (requiere presencia) Protocolo Est\u00e1ndares abiertos (SMTP/IMAP) Propietarios en su mayor\u00eda Almacenamiento Servidor (persistente) Cliente o servidor (variable) Fiabilidad Alta (TCP + reintentos) Media (depende del servicio) Interoperabilidad Universal entre dominios Limitada a mismo servicio"},{"location":"conceptos_base/#proximos-pasos","title":"Pr\u00f3ximos Pasos","text":"<p>Una vez comprendidos los conceptos fundamentales, es esencial entender c\u00f3mo se estructura t\u00e9cnicamente el sistema de correo electr\u00f3nico:</p> <ul> <li>Contin\u00faa con Arquitectura del Sistema para conocer los agentes involucrados (MUA, MTA, MDA)</li> <li>Explora los Protocolos de Comunicaci\u00f3n para entender SMTP, IMAP y POP3</li> <li>Descubre la importancia de DNS en la infraestructura de correo</li> </ul>"},{"location":"dns_infraestructura/","title":"Infraestructura DNS y Correo Electr\u00f3nico","text":""},{"location":"dns_infraestructura/#introduccion","title":"Introducci\u00f3n","text":"<p>El sistema de correo electr\u00f3nico no puede funcionar sin DNS (Domain Name System). Antes de enviar un solo byte de mensaje, los servidores MTA deben resolver direcciones IP mediante consultas DNS. La infraestructura DNS es el \"directorio telef\u00f3nico\" de Internet para el correo electr\u00f3nico.</p> <pre><code>flowchart LR\n    A[MTA Origen] --&gt;|1. Consulta| B[Servidor DNS]\n    B --&gt;|2. \u00bfMX para&lt;br/&gt;destino.com?| B\n    B --&gt;|3. Devuelve&lt;br/&gt;mail.destino.com| A\n    A --&gt;|4. Consulta&lt;br/&gt;registro A| B\n    B --&gt;|5. Devuelve&lt;br/&gt;192.0.2.10| A\n    A --&gt;|6. Conecta SMTP&lt;br/&gt;a 192.0.2.10| C[MTA Destino]\n\n    style A fill:#26a69a,stroke:#00695c,color:#fff\n    style B fill:#ffa726,stroke:#f57c00,color:#fff\n    style C fill:#26a69a,stroke:#00695c,color:#fff</code></pre>"},{"location":"dns_infraestructura/#registros-dns-criticos-para-correo","title":"Registros DNS Cr\u00edticos para Correo","text":""},{"location":"dns_infraestructura/#registro-mx-mail-exchanger","title":"Registro MX (Mail Exchanger)","text":"<p>Funci\u00f3n: Indica qu\u00e9 servidor o servidores son los responsables de recibir el correo electr\u00f3nico para un dominio espec\u00edfico.</p> <p>Sintaxis b\u00e1sica: <pre><code>dominio.    TTL    IN    MX    prioridad    servidor-correo.\n</code></pre></p> <p>Caracter\u00edsticas:</p> Prioridad Se pueden definir m\u00faltiples registros MX con diferentes valores de prioridad. El servidor emisor intentar\u00e1 conectar primero con el de n\u00famero m\u00e1s bajo (mayor prioridad). Si falla, probar\u00e1 con el siguiente. Fallback y redundancia Los registros MX m\u00faltiples proporcionan alta disponibilidad. Si el servidor principal est\u00e1 ca\u00eddo, el correo se entrega al secundario. Valor del registro Apunta a un nombre de dominio completo (FQDN), nunca a una direcci\u00f3n IP directamente."},{"location":"dns_infraestructura/#ejemplo-de-configuracion-mx","title":"Ejemplo de Configuraci\u00f3n MX","text":"<pre><code>; Zona DNS para ejemplo.com\nejemplo.com.        IN  MX  10  mail.ejemplo.com.\nejemplo.com.        IN  MX  20  mail2.ejemplo.com.\nejemplo.com.        IN  MX  30  backup.proveedor.com.\n\n; Registros A correspondientes\nmail.ejemplo.com.   IN  A   192.0.2.10\nmail2.ejemplo.com.  IN  A   192.0.2.11\nbackup.proveedor.com. IN A 198.51.100.50\n</code></pre> <p>Interpretaci\u00f3n:</p> <ol> <li>El MTA emisor consulta los registros MX de <code>ejemplo.com</code></li> <li>Intenta entregar al servidor con prioridad 10: <code>mail.ejemplo.com</code></li> <li>Si falla, intenta con prioridad 20: <code>mail2.ejemplo.com</code></li> <li>Como \u00faltimo recurso, usa prioridad 30: <code>backup.proveedor.com</code></li> </ol> <p>Buenas Pr\u00e1cticas MX</p> <ul> <li>Configurar al menos dos registros MX (principal y fallback) para garantizar la disponibilidad</li> <li>Usar diferentes redes o proveedores para los servidores MX secundarios</li> <li>Valores de prioridad t\u00edpicos: 10, 20, 30 (incrementos de 10 facilitan insertar futuros registros intermedios)</li> </ul>"},{"location":"dns_infraestructura/#registro-a-aaaa","title":"Registro A / AAAA","text":"<p>Funci\u00f3n: Traduce un nombre de dominio a su direcci\u00f3n IP.</p> A (Address) Devuelve una direcci\u00f3n IPv4 (32 bits). Ejemplo: <code>192.0.2.10</code> AAAA (Quad-A) Devuelve una direcci\u00f3n IPv6 (128 bits). Ejemplo: <code>2001:db8::1</code> <p>Relaci\u00f3n con MX: El registro MX apunta a un nombre de dominio, que a su vez debe tener un registro A/AAAA para resolver la IP real del servidor.</p>"},{"location":"dns_infraestructura/#ejemplo","title":"Ejemplo","text":"<pre><code>; El registro MX apunta a un nombre\nejemplo.com.        IN  MX  10  mail.ejemplo.com.\n\n; Ese nombre DEBE tener un registro A\nmail.ejemplo.com.   IN  A   192.0.2.10\n\n; Opcionalmente tambi\u00e9n IPv6\nmail.ejemplo.com.   IN  AAAA  2001:db8:85a3::8a2e:370:7334\n</code></pre> <p>Error Com\u00fan</p> <p>No se puede poner una direcci\u00f3n IP directamente en un registro MX:</p> <pre><code># INCORRECTO - causar\u00e1 fallos\nejemplo.com.  IN  MX  10  192.0.2.10\n\n# CORRECTO - usar un FQDN\nejemplo.com.  IN  MX  10  mail.ejemplo.com.\nmail.ejemplo.com. IN A  192.0.2.10\n</code></pre>"},{"location":"dns_infraestructura/#registro-ptr-reverse-dns","title":"Registro PTR (Reverse DNS)","text":"<p>Funci\u00f3n: Es el inverso del registro A. Traduce una direcci\u00f3n IP a un nombre de dominio.</p> <p>Zona especial: Los registros PTR se almacenan en zonas especiales <code>in-addr.arpa</code> (IPv4) o <code>ip6.arpa</code> (IPv6).</p>"},{"location":"dns_infraestructura/#importancia-para-el-correo-electronico","title":"Importancia para el Correo Electr\u00f3nico","text":"<p>Validaci\u00f3n Antispam</p> <p>Muchos servidores de correo rechazan mensajes procedentes de IPs que no tienen un registro PTR v\u00e1lido configurado. Es una medida de confianza b\u00e1sica que indica que la IP pertenece a un servidor leg\u00edtimo.</p> <p>Validaci\u00f3n t\u00edpica:</p> <ol> <li>Servidor destino recibe conexi\u00f3n SMTP desde IP <code>192.0.2.10</code></li> <li>Realiza consulta DNS inversa (PTR) de <code>192.0.2.10</code></li> <li>Recibe <code>mail.ejemplo.com</code></li> <li>Verifica que <code>mail.ejemplo.com</code> resuelve de vuelta a <code>192.0.2.10</code> (forward-confirmed reverse DNS)</li> <li>Si la validaci\u00f3n falla, el correo puede ser rechazado o marcado como spam</li> </ol>"},{"location":"dns_infraestructura/#ejemplo-de-ptr","title":"Ejemplo de PTR","text":"<pre><code>; Zona inversa para 192.0.2.0/24\n10.2.0.192.in-addr.arpa.  IN  PTR  mail.ejemplo.com.\n</code></pre> <p>Nota: La configuraci\u00f3n de registros PTR generalmente requiere la colaboraci\u00f3n del proveedor de Internet o ISP que controla el bloque de IPs.</p>"},{"location":"dns_infraestructura/#tabla-completa-de-registros-dns-relevantes","title":"Tabla Completa de Registros DNS Relevantes","text":"Tipo Funci\u00f3n Ejemplo Importancia MX Servidor de correo para el dominio <code>ejemplo.com IN MX 10 mail.ejemplo.com</code> Cr\u00edtica - Sin MX no se recibe correo A Direcci\u00f3n IPv4 del servidor <code>mail.ejemplo.com IN A 192.0.2.10</code> Cr\u00edtica - Necesaria para resolver el MX AAAA Direcci\u00f3n IPv6 del servidor <code>mail.ejemplo.com IN AAAA 2001:db8::1</code> Recomendada - Soporte IPv6 PTR Reverse DNS (IP \u2192 nombre) <code>10.2.0.192.in-addr.arpa IN PTR mail.ejemplo.com</code> Cr\u00edtica - Prevenci\u00f3n de spam TXT Texto arbitrario (SPF, DKIM, DMARC) <code>ejemplo.com IN TXT \"v=spf1 mx -all\"</code> Cr\u00edtica - Seguridad del correo CNAME Alias de otro dominio <code>www IN CNAME ejemplo.com</code> No usar en MX <sup>1</sup>"},{"location":"dns_infraestructura/#proceso-completo-de-resolucion-dns-para-correo","title":"Proceso Completo de Resoluci\u00f3n DNS para Correo","text":"<pre><code>sequenceDiagram\n    participant MTA as MTA Origen\n    participant DNS as Servidor DNS\n    participant Destino as MTA Destino\n\n    Note over MTA: Usuario env\u00eda correo a&lt;br/&gt;usuario@destino.com\n\n    MTA-&gt;&gt;DNS: Consulta MX de destino.com\n    DNS--&gt;&gt;MTA: MX 10 mail.destino.om\n\n    MTA-&gt;&gt;DNS: Consulta A de mail.destino.com\n    DNS--&gt;&gt;MTA: 192.0.2.50\n\n    MTA-&gt;&gt;DNS: Consulta PTR de 192.0.2.50\n    DNS--&gt;&gt;MTA: mail.destino.com (verificado)\n\n    MTA-&gt;&gt;Destino: Conecta SMTP a 192.0.2.50:25\n    Destino--&gt;&gt;MTA: 220 mail.destino.com ESMTP\n\n    Note over MTA,Destino: Sesi\u00f3n SMTP normal...</code></pre>"},{"location":"dns_infraestructura/#herramientas-de-diagnostico-dns","title":"Herramientas de Diagn\u00f3stico DNS","text":""},{"location":"dns_infraestructura/#dig-domain-information-groper","title":"dig (Domain Information Groper)","text":"<p>Herramienta profesional para consultas DNS manuales:</p> <pre><code># Consultar registros MX\ndig ejemplo.com MX +short\n\n# Consultar registro A\ndig mail.ejemplo.com A +short\n\n# Consultar PTR (reverse DNS)\ndig -x 192.0.2.10 +short\n\n# Consulta detallada con traza\ndig ejemplo.com MX +trace\n</code></pre>"},{"location":"dns_infraestructura/#nslookup","title":"nslookup","text":"<p>Alternativa m\u00e1s simple (disponible en Windows y Linux):</p> <pre><code># Consulta MX\nnslookup -type=MX ejemplo.com\n\n# Consulta A\nnslookup mail.ejemplo.com\n\n# Consulta PTR\nnslookup 192.0.2.10\n</code></pre> <p>Verificaci\u00f3n de Configuraci\u00f3n</p> <p>Antes de poner un servidor de correo en producci\u00f3n, verificar siempre:</p> <ol> <li>Registros MX configurados correctamente</li> <li>Registro A del servidor de correo apunta a la IP correcta</li> <li>Registro PTR configurado (reverse DNS)</li> <li>Forward-confirmed reverse DNS (PTR coincide con A)</li> </ol>"},{"location":"dns_infraestructura/#proximos-pasos","title":"Pr\u00f3ximos Pasos","text":"<p>Con la infraestructura DNS comprendida, explora:</p> <ul> <li>Seguridad: Registros DNS para SPF, DKIM y DMARC que validan la autenticidad del correo</li> <li>Administraci\u00f3n: Configuraci\u00f3n pr\u00e1ctica de servidores MTA y diagn\u00f3stico de problemas</li> <li>Volver a Arquitectura para revisar c\u00f3mo todo se integra</li> </ul> <ol> <li> <p>Los registros CNAME no deben usarse como destino de registros MX seg\u00fan RFC 2181. Usar siempre registros A directos.\u00a0\u21a9</p> </li> </ol>"},{"location":"protocolos/","title":"Protocolos de Comunicaci\u00f3n","text":""},{"location":"protocolos/#introduccion","title":"Introducci\u00f3n","text":"<p>La comunicaci\u00f3n entre los distintos agentes del sistema de correo (MUA, MTA, MDA) se rige por protocolos espec\u00edficos seg\u00fan la direcci\u00f3n del flujo de datos. Es fundamental distinguir entre protocolos de env\u00edo (push) y de recepci\u00f3n (pull).</p> <pre><code>graph LR\n    A[MUA Cliente] --&gt;|SMTP Env\u00edo| B[MTA Servidor]\n    B --&gt;|SMTP Transferencia| C[MTA Destino]\n    C --&gt;|Almacenamiento| D[Buz\u00f3n del Usuario]\n    D --&gt;|IMAP/POP3 Recepci\u00f3n| E[MUA Destinatario]\n\n    style A fill:#5c6bc0,stroke:#3949ab,color:#fff\n    style B fill:#26a69a,stroke:#00695c,color:#fff\n    style C fill:#26a69a,stroke:#00695c,color:#fff\n    style D fill:#ab47bc,stroke:#7b1fa2,color:#fff\n    style E fill:#5c6bc0,stroke:#3949ab,color:#fff</code></pre>"},{"location":"protocolos/#protocolos-de-envio","title":"Protocolos de Env\u00edo","text":""},{"location":"protocolos/#smtp-simple-mail-transfer-protocol","title":"SMTP (Simple Mail Transfer Protocol)","text":"<p>Definici\u00f3n: Es el protocolo est\u00e1ndar para el intercambio de correo electr\u00f3nico entre servidores y para el env\u00edo inicial desde el cliente al servidor.</p> <p>RFC de referencia: RFC 5321</p>"},{"location":"protocolos/#caracteristicas-tecnicas","title":"Caracter\u00edsticas T\u00e9cnicas","text":"Naturaleza del protocolo Protocolo de texto plano basado en comandos ASCII. La comunicaci\u00f3n es legible por humanos, lo que facilita el diagn\u00f3stico manual. Modelo de comunicaci\u00f3n Cliente-Servidor sobre TCP. El cliente env\u00eda comandos y el servidor responde con c\u00f3digos num\u00e9ricos de tres d\u00edgitos. Tipo de operaci\u00f3n Push (empujar). SMTP solo sirve para enviar correo, no para descargarlo. El cliente \"empuja\" el mensaje hacia el servidor."},{"location":"protocolos/#flujo-de-una-sesion-smtp","title":"Flujo de una Sesi\u00f3n SMTP","text":"<pre><code>sequenceDiagram\n    participant C as Cliente SMTP\n    participant S as Servidor SMTP\n\n    C-&gt;&gt;S: Conecta al puerto 25/587\n    S--&gt;&gt;C: 220 mail.ejemplo.com ESMTP\n    C-&gt;&gt;S: EHLO cliente.dominio.com\n    S--&gt;&gt;C: 250-mail.ejemplo.com&lt;br/&gt;250-SIZE 52428800&lt;br/&gt;250 STARTTLS\n    C-&gt;&gt;S: STARTTLS\n    S--&gt;&gt;C: 220 Ready to start TLS\n    Note over C,S: Negociaci\u00f3n TLS\n    C-&gt;&gt;S: MAIL FROM:&lt;usuario@origen.com&gt;\n    S--&gt;&gt;C: 250 OK\n    C-&gt;&gt;S: RCPT TO:&lt;destino@ejemplo.com&gt;\n    S--&gt;&gt;C: 250 OK\n    C-&gt;&gt;S: DATA\n    S--&gt;&gt;C: 354 End data with &lt;CR&gt;&lt;LF&gt;.&lt;CR&gt;&lt;LF&gt;\n    C-&gt;&gt;S: From: usuario@origen.com&lt;br/&gt;To: destino@ejemplo.com&lt;br/&gt;Subject: Prueba&lt;br/&gt;&lt;br/&gt;Cuerpo del mensaje&lt;br/&gt;.\n    S--&gt;&gt;C: 250 Message accepted\n    C-&gt;&gt;S: QUIT\n    S--&gt;&gt;C: 221 Bye</code></pre>"},{"location":"protocolos/#comandos-smtp-principales","title":"Comandos SMTP Principales","text":"Comando Descripci\u00f3n Ejemplo <code>HELO</code> / <code>EHLO</code> Identificaci\u00f3n del cliente (EHLO para Extended SMTP) <code>EHLO cliente.ejemplo.com</code> <code>MAIL FROM</code> Especifica el remitente del correo <code>MAIL FROM:&lt;usuario@origen.com&gt;</code> <code>RCPT TO</code> Especifica el destinatario <code>RCPT TO:&lt;destino@ejemplo.com&gt;</code> <code>DATA</code> Inicia la transferencia del contenido del mensaje <code>DATA</code> <code>QUIT</code> Cierra la conexi\u00f3n SMTP <code>QUIT</code> <code>RSET</code> Reinicia la transacci\u00f3n actual <code>RSET</code> <code>VRFY</code> Verifica si existe un buz\u00f3n (usualmente deshabilitado) <code>VRFY usuario</code>"},{"location":"protocolos/#ejemplo-de-sesion-smtp-real","title":"Ejemplo de Sesi\u00f3n SMTP Real","text":"<pre><code>220 mail.servidor.com ESMTP Postfix\nEHLO cliente.origen.com\n250-mail.servidor.com\n250-PIPELINING\n250-SIZE 10240000\n250-VRFY\n250-ETRN\n250-STARTTLS\n250-AUTH PLAIN LOGIN\n250-ENHANCEDSTATUSCODES\n250-8BITMIME\n250 DSN\nMAIL FROM:&lt;remitente@origen.com&gt;\n250 2.1.0 Ok\nRCPT TO:&lt;destinatario@servidor.com&gt;\n250 2.1.5 Ok\nDATA\n354 End data with &lt;CR&gt;&lt;LF&gt;.&lt;CR&gt;&lt;LF&gt;\nFrom: Remitente &lt;remitente@origen.com&gt;\nTo: Destinatario &lt;destinatario@servidor.com&gt;\nSubject: Mensaje de prueba\nDate: Thu, 06 Feb 2026 11:30:00 +0100\n\nEste es el cuerpo del mensaje.\n.\n250 2.0.0 Ok: queued as 3A2F41234\nQUIT\n221 2.0.0 Bye\n</code></pre> <p>Limitaci\u00f3n de SMTP</p> <p>SMTP es un protocolo unidireccional de env\u00edo. No permite consultar ni descargar correos del servidor. Para eso se utilizan IMAP o POP3.</p>"},{"location":"protocolos/#protocolos-de-recepcion","title":"Protocolos de Recepci\u00f3n","text":"<p>Los protocolos de recepci\u00f3n permiten al usuario consultar y gestionar su buz\u00f3n de correo almacenado en el servidor.</p>"},{"location":"protocolos/#pop3-post-office-protocol-v3","title":"POP3 (Post Office Protocol v3)","text":"<p>Definici\u00f3n: Protocolo dise\u00f1ado para simular un apartado de correos f\u00edsico tradicional.</p> <p>RFC de referencia: RFC 1939</p>"},{"location":"protocolos/#modelo-de-funcionamiento","title":"Modelo de Funcionamiento","text":"<pre><code>flowchart LR\n    A[Servidor] --&gt;|1. Conecta| B[Cliente POP3]\n    A --&gt;|2. Descarga todos&lt;br/&gt;los mensajes| B\n    A --&gt;|3. Elimina del&lt;br/&gt;servidor| C[Servidor vac\u00edo]\n    B --&gt;|4. Almacena| D[Disco local]\n\n    style A fill:#26a69a,stroke:#00695c,color:#fff\n    style C fill:#ef5350,stroke:#c62828,color:#fff\n    style D fill:#5c6bc0,stroke:#3949ab,color:#fff</code></pre>"},{"location":"protocolos/#caracteristicas","title":"Caracter\u00edsticas","text":"<ul> <li>Operaci\u00f3n: Se conecta, descarga todos los mensajes al dispositivo local y, por defecto, los elimina del servidor</li> <li>Filosof\u00eda: \"Mover\" el correo del servidor al cliente</li> <li>Sincronizaci\u00f3n: Inexistente. Los mensajes solo est\u00e1n en un dispositivo</li> <li>Estado: No mantiene estados (le\u00eddo/no le\u00eddo) en el servidor</li> </ul>"},{"location":"protocolos/#limitaciones","title":"Limitaciones","text":"<p>Uso Obsoleto</p> <p>POP3 es obsoleto en entornos multidispositivo:</p> <ul> <li>No permite ver los correos enviados (solo est\u00e1n en el cliente que los envi\u00f3)</li> <li>No sincroniza estados entre dispositivos (m\u00f3vil, PC, tablet)</li> <li>Si se pierde el dispositivo, se pierden todos los correos</li> <li>No soporta carpetas del lado del servidor</li> </ul> <p>Caso de uso v\u00e1lido: Usuarios con un solo dispositivo y necesidad de acceso offline completo.</p>"},{"location":"protocolos/#imap-internet-message-access-protocol","title":"IMAP (Internet Message Access Protocol)","text":"<p>Definici\u00f3n: Protocolo dise\u00f1ado para la gesti\u00f3n remota del buz\u00f3n con sincronizaci\u00f3n completa.</p> <p>RFC de referencia: RFC 3501</p>"},{"location":"protocolos/#modelo-de-funcionamiento_1","title":"Modelo de Funcionamiento","text":"<pre><code>flowchart TD\n    A[Servidor IMAP] &lt;--&gt;|Sincronizaci\u00f3n&lt;br/&gt;bidireccional| B[PC]\n    A &lt;--&gt;|Sincronizaci\u00f3n&lt;br/&gt;bidireccional| C[M\u00f3vil]\n    A &lt;--&gt;|Sincronizaci\u00f3n&lt;br/&gt;bidireccional| D[Tablet]\n\n    E[Todos los dispositivos&lt;br/&gt;ven el mismo estado]\n\n    style A fill:#26a69a,stroke:#00695c,color:#fff\n    style B fill:#5c6bc0,stroke:#3949ab,color:#fff\n    style C fill:#5c6bc0,stroke:#3949ab,color:#fff\n    style D fill:#5c6bc0,stroke:#3949ab,color:#fff\n    style E fill:#ffa726,stroke:#f57c00,color:#000</code></pre>"},{"location":"protocolos/#caracteristicas-avanzadas","title":"Caracter\u00edsticas Avanzadas","text":"Almacenamiento en servidor Los correos permanecen en el servidor. El cliente solo descarga cabeceras o mensajes completos bajo demanda. Sincronizaci\u00f3n bidireccional Los cambios realizados en cualquier dispositivo (leer, marcar, mover, eliminar) se sincronizan autom\u00e1ticamente con el servidor y otros clientes. Gesti\u00f3n de carpetas Soporte completo para carpetas, subcarpetas y etiquetas gestionadas en el servidor. B\u00fasqueda del lado del servidor Permite realizar b\u00fasquedas complejas en el servidor sin descargar todos los mensajes. Modo offline Los clientes modernos pueden cachear mensajes localmente para acceso sin conexi\u00f3n."},{"location":"protocolos/#ventajas-de-imap","title":"Ventajas de IMAP","text":"<p>Protocolo Recomendado Actual</p> <p>IMAP es el est\u00e1ndar moderno para acceso a correo electr\u00f3nico:</p> <ul> <li>Multidispositivo: Perfecta sincronizaci\u00f3n entre PC, m\u00f3vil y tablet</li> <li>Backup centralizado: Los correos est\u00e1n seguros en el servidor</li> <li>Ahorro de ancho de banda: Solo se descargan los mensajes visualizados</li> <li>Organizaci\u00f3n avanzada: Carpetas, flags, b\u00fasquedas complejas</li> <li>Escalabilidad: Funciona eficientemente con buzones de miles de mensajes</li> </ul>"},{"location":"protocolos/#comparativa-pop3-vs-imap","title":"Comparativa POP3 vs IMAP","text":"Caracter\u00edstica POP3 IMAP Almacenamiento Cliente (local) Servidor (remoto) Sincronizaci\u00f3n No existe Completa entre dispositivos Carpetas del servidor No soportadas Soportadas completamente Estados (le\u00eddo/no le\u00eddo) Solo local Sincronizados B\u00fasqueda Solo en cliente Servidor y cliente Acceso multidispositivo Problem\u00e1tico Nativo Ancho de banda inicial Alto (descarga todo) Bajo (solo cabeceras) Backup Responsabilidad del usuario Autom\u00e1tico en servidor Uso actual Legacy Est\u00e1ndar moderno"},{"location":"protocolos/#tabla-de-puertos-estandar","title":"Tabla de Puertos Est\u00e1ndar","text":"<p>Es cr\u00edtico para la administraci\u00f3n de firewalls y configuraci\u00f3n de servicios conocer los puertos asignados por la IANA.</p> Servicio Funci\u00f3n Puerto Sin Cifrado Puerto con TLS/SSL Protocolo de Transporte SMTP Transferencia entre servidores 25 25 + STARTTLS TCP SMTP Submission Env\u00edo de clientes a servidor 587 465<sup>1</sup> TCP IMAP Acceso al buz\u00f3n 143 993 TCP POP3 Descarga de buz\u00f3n 110 995 TCP <p>Diferencia entre Puertos SMTP</p> <ul> <li>Puerto 25: Comunicaci\u00f3n servidor a servidor (MTA \u2194 MTA). No requiere autenticaci\u00f3n.</li> <li>Puerto 587 (Submission): Env\u00edo de clientes autenticados (MUA \u2192 MTA). Requiere autenticaci\u00f3n del usuario.</li> <li>Puerto 465: SMTP con TLS impl\u00edcito (conexi\u00f3n cifrada desde el inicio).</li> </ul> <p>Seguridad en Puertos</p> <p>Los puertos sin cifrado (25, 143, 110) transmiten credenciales y mensajes en texto plano. En entornos de producci\u00f3n modernos se debe:</p> <ol> <li>Forzar TLS mediante STARTTLS (puertos est\u00e1ndar) o usar puertos TLS impl\u00edcitos</li> <li>Deshabilitar autenticaci\u00f3n en conexiones no cifradas</li> <li>Configurar cortafuegos para permitir solo los puertos necesarios</li> </ol>"},{"location":"protocolos/#proximos-pasos","title":"Pr\u00f3ximos Pasos","text":"<p>Ahora que comprendes los protocolos de comunicaci\u00f3n, contin\u00faa explorando:</p> <ul> <li>Infraestructura DNS: C\u00f3mo los registros MX permiten el enrutamiento de correo</li> <li>Seguridad: Mecanismos de autenticaci\u00f3n y cifrado (SPF, DKIM, DMARC, TLS)</li> <li>Administraci\u00f3n: Configuraci\u00f3n pr\u00e1ctica y an\u00e1lisis de logs</li> </ul> <ol> <li> <p>Puerto 465 (SMTPS) fue originalmente asignado pero deprecado. Actualmente ha sido rehabilitado para SMTP sobre TLS impl\u00edcito.\u00a0\u21a9</p> </li> </ol>"},{"location":"seguridad/","title":"Seguridad y Autenticaci\u00f3n en Correo Electr\u00f3nico","text":""},{"location":"seguridad/#introduccion","title":"Introducci\u00f3n","text":"<p>El protocolo original de correo electr\u00f3nico (SMTP) no fue dise\u00f1ado con seguridad en mente. En los a\u00f1os 80, Internet era una red acad\u00e9mica de  confianza mutua. Para combatir el spam, el phishing y la suplantaci\u00f3n de identidad (spoofing), se han desarrollado m\u00faltiples capas adicionales de seguridad que actualmente son imprescindibles en cualquier despliegue profesional.</p> <pre><code>flowchart TD\n    A[Correo enviado] --&gt; B{Cifrado TLS}\n    B --&gt;|No| X[Rechazo recomendado]\n    B --&gt;|S\u00ed| C{Validaci\u00f3n SPF}\n    C --&gt;|Falla| D[Marcar como spam]\n    C --&gt;|Pasa| E{Validaci\u00f3n DKIM}\n    E --&gt;|Falla| D\n    E --&gt;|Pasa| F{Pol\u00edtica DMARC}\n    F --&gt;|Pasa todas| G[Correo aceptado]\n    F --&gt;|Falla| H{Acci\u00f3n DMARC}\n    H --&gt;|none| I[Aceptar pero reportar]\n    H --&gt;|quarantine| J[Enviar a spam]\n    H --&gt;|reject| K[Rechazar completamente]\n\n    style X fill:#ef5350,stroke:#c62828,color:#fff\n    style D fill:#ffa726,stroke:#f57c00,color:#fff\n    style G fill:#26a69a,stroke:#00695c,color:#fff\n    style J fill:#ffa726,stroke:#f57c00,color:#fff\n    style K fill:#ef5350,stroke:#c62828,color:#fff</code></pre>"},{"location":"seguridad/#cifrado-en-transito-tlsssl","title":"Cifrado en Tr\u00e1nsito (TLS/SSL)","text":""},{"location":"seguridad/#problema-interceptacion-de-mensajes","title":"Problema: Interceptaci\u00f3n de Mensajes","text":"<p>Por defecto, SMTP transmite todo en texto plano: credenciales de autenticaci\u00f3n, contenido de mensajes, direcciones. Esto lo hace vulnerable a ataques Man-in-the-Middle (MITM) donde un atacante intercepta y lee la comunicaci\u00f3n.</p>"},{"location":"seguridad/#solucion-transport-layer-security-tls","title":"Soluci\u00f3n: Transport Layer Security (TLS)","text":"<p>TLS (Transport Layer Security) cifra la conexi\u00f3n entre cliente y servidor, protegiendo contra la interceptaci\u00f3n.</p>"},{"location":"seguridad/#modos-de-implementacion-tls","title":"Modos de Implementaci\u00f3n TLS","text":"STARTTLS (Oportunista)TLS Impl\u00edcito (Wrapper) <p>Descripci\u00f3n: Permite elevar una conexi\u00f3n inicialmente insegura a una cifrada mediante el comando <code>STARTTLS</code>.</p> <p>Funcionamiento:</p> <ol> <li>Cliente conecta al puerto est\u00e1ndar (25, 587, 143)</li> <li>Servidor anuncia capacidad STARTTLS</li> <li>Cliente solicita <code>STARTTLS</code></li> <li>Se realiza negociaci\u00f3n TLS</li> <li>La conexi\u00f3n contin\u00faa ahora cifrada</li> </ol> <p>Ventajas:</p> <ul> <li>Compatibilidad con clientes antiguos que no soportan TLS</li> <li>Usa los puertos est\u00e1ndar</li> </ul> <p>Desventajas:</p> <ul> <li>Vulnerable a ataques de degradaci\u00f3n (strip STARTTLS)</li> <li>Requiere configuraci\u00f3n expl\u00edcita para forzar TLS</li> </ul> <p>Descripci\u00f3n: La conexi\u00f3n nace cifrada desde el primer byte. No hay fase de texto plano.</p> <p>Puertos dedicados:</p> <ul> <li>465: SMTP sobre TLS (SMTPS)</li> <li>993: IMAP sobre TLS (IMAPS)</li> <li>995: POP3 sobre TLS (POP3S)</li> </ul> <p>Ventajas:</p> <ul> <li>Protecci\u00f3n completa desde el inicio</li> <li>No vulnerable a ataques de degradaci\u00f3n</li> <li>M\u00e1s simple de configurar en cliente</li> </ul> <p>Desventajas:</p> <ul> <li>Requiere puerto dedicado</li> <li>Menor compatibilidad con sistemas legacy</li> </ul> <p>Recomendaci\u00f3n de Seguridad</p> <p>En entornos de producci\u00f3n modernos:</p> <ol> <li>Deshabilitar completamente la autenticaci\u00f3n sin TLS</li> <li>Usar puertos con TLS impl\u00edcito (465, 993, 995) cuando sea posible</li> <li>Si se usa STARTTLS, forzar su uso mediante restricciones en el servidor</li> <li>Configurar certificados SSL/TLS v\u00e1lidos (Let's Encrypt, DigiCert, etc.)</li> </ol>"},{"location":"seguridad/#mecanismos-de-autenticacion-de-dominio","title":"Mecanismos de Autenticaci\u00f3n de Dominio","text":"<p>Los tres mecanismos siguientes trabajan juntos para validar que un correo proviene realmente del dominio que afirma ser.</p>"},{"location":"seguridad/#spf-sender-policy-framework","title":"SPF (Sender Policy Framework)","text":"<p>Definici\u00f3n: Mecanismo basado en DNS que certifica qu\u00e9 servidores est\u00e1n autorizados a enviar correo en nombre de un dominio.</p> <p>RFC de referencia: RFC 7208</p>"},{"location":"seguridad/#funcionamiento","title":"Funcionamiento","text":"<pre><code>sequenceDiagram\n    participant MTA as MTA Receptor\n    participant DNS as Servidor DNS\n    participant Spammer as Posible Spammer\n\n    Spammer-&gt;&gt;MTA: MAIL FROM:&lt;fake@ejemplo.com&gt;&lt;br/&gt;IP: 203.0.113.50\n    MTA-&gt;&gt;DNS: \u00bfCu\u00e1l es el SPF de ejemplo.com?\n    DNS--&gt;&gt;MTA: v=spf1 ip4:192.0.2.0/24 mx -all\n    Note over MTA: La IP 203.0.113.50&lt;br/&gt;NO est\u00e1 autorizada\n    MTA--&gt;&gt;Spammer: 550 SPF check failed</code></pre>"},{"location":"seguridad/#formato-del-registro-spf","title":"Formato del Registro SPF","text":"<p>El registro SPF se publica como registro TXT en DNS:</p> <pre><code>ejemplo.com.  IN  TXT  \"v=spf1 ip4:192.0.2.10 include:_spf.google.com mx -all\"\n</code></pre> <p>Componentes:</p> v=spf1 Versi\u00f3n del protocolo SPF ip4:192.0.2.10 Autoriza una IP espec\u00edfica (tambi\u00e9n puede ser <code>ip6:</code> para IPv6) include:_spf.google.com Incluye las IPs autorizadas de otro dominio (\u00fatil para proveedores externos como Google Workspace) mx Autoriza las IPs de los servidores listados en registros MX -all Pol\u00edtica estricta: rechazar cualquier IP no listada <p>Calificadores:</p> Calificador Significado Acci\u00f3n recomendada <code>+</code> (pass) Autorizado expl\u00edcitamente Aceptar <code>-</code> (fail) NO autorizado - pol\u00edtica dura Rechazar <code>~</code> (softfail) NO autorizado - pol\u00edtica suave Marcar como spam <code>?</code> (neutral) Sin pol\u00edtica definida Ninguna acci\u00f3n"},{"location":"seguridad/#ejemplo-de-validacion-spf","title":"Ejemplo de Validaci\u00f3n SPF","text":"<pre><code># Empresa con servidor propio y uso de Google Workspace\nejemplo.com. IN TXT \"v=spf1 mx ip4:192.0.2.10 include:_spf.google.com -all\"\n</code></pre> <p>Interpretaci\u00f3n: Est\u00e1n autorizados a enviar correo como <code>@ejemplo.com</code>: - Los servidores listados en los registros MX - La IP <code>192.0.2.10</code> - Los servidores autorizados por Google (para cuentas Google Workspace) - Cualquier otra IP ser\u00e1 rechazada (-all)</p>"},{"location":"seguridad/#dkim-domainkeys-identified-mail","title":"DKIM (DomainKeys Identified Mail)","text":"<p>Definici\u00f3n: Sistema de firma digital que garantiza la integridad del mensaje y la autenticidad del dominio emisor.</p> <p>RFC de referencia: RFC 6376</p>"},{"location":"seguridad/#funcionamiento_1","title":"Funcionamiento","text":"<pre><code>sequenceDiagram\n    participant MTA_O as MTA Origen\n    participant Mensaje as Mensaje\n    participant DNS as DNS P\u00fablico\n    participant MTA_D as MTA Destino\n\n    Note over MTA_O: Firma el mensaje&lt;br/&gt;con clave privada\n    MTA_O-&gt;&gt;Mensaje: A\u00f1ade cabecera DKIM-Signature\n    Mensaje-&gt;&gt;MTA_D: Mensaje con firma\n    MTA_D-&gt;&gt;DNS: Consulta clave p\u00fablica&lt;br/&gt;selector._domainkey.ejemplo.com\n    DNS--&gt;&gt;MTA_D: Devuelve clave p\u00fablica\n    Note over MTA_D: Verifica firma con&lt;br/&gt;clave p\u00fablica\n    MTA_D-&gt;&gt;MTA_D: Compara hashes\n    alt Firma v\u00e1lida\n        MTA_D--&gt;&gt;MTA_D: DKIM PASS\n    else Firma inv\u00e1lida\n        MTA_D--&gt;&gt;MTA_D: DKIM FAIL - Contenido alterado\n    end</code></pre>"},{"location":"seguridad/#componentes-dkim","title":"Componentes DKIM","text":"Clave privada (en el servidor de origen) Se almacena de forma segura en el servidor MTA. Se usa para firmar los mensajes salientes. Clave p\u00fablica (en DNS) Se publica como registro TXT con formato especial: <code>selector._domainkey.dominio.com</code> Cabecera DKIM-Signature A\u00f1adida autom\u00e1ticamente al mensaje. Contiene la firma criptogr\u00e1fica."},{"location":"seguridad/#ejemplo-de-registro-dkim-en-dns","title":"Ejemplo de Registro DKIM en DNS","text":"<pre><code>selector1._domainkey.ejemplo.com. IN TXT (\n    \"v=DKIM1; k=rsa; \"\n    \"p=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDwIRP/UC3SBsEmGqZ9ZJW3/DkMoGeLnQg1fWn7/zYtIxN2SnFCjxOCKG9v3b4jYfcTNh5ijSsq631uBItLa7od+v/RtdC2UzJ1lWT947qR+Rce9VCOlr9lDBTNDLYE3IAVBdYwHTsqLz8KqtD8iAZH7sY2OiO7Mm0XHW3z9CkzxQIDAQAB\"\n)\n</code></pre> <p>Campos: - <code>v=DKIM1</code>: Versi\u00f3n de DKIM - <code>k=rsa</code>: Tipo de clave (RSA) - <code>p=...</code>: Clave p\u00fablica en formato Base64</p> <p>Generaci\u00f3n de Claves DKIM</p> <p>La mayor\u00eda de MTA modernos (Postfix + OpenDKIM, etc.) incluyen herramiento para generar pares de claves:</p> <pre><code>opendkim-genkey -s selector1 -d ejemplo.com\n</code></pre>"},{"location":"seguridad/#dmarc-domain-based-message-authentication","title":"DMARC (Domain-based Message Authentication)","text":"<p>Definici\u00f3n: Pol\u00edtica que unifica SPF y DKIM y especifica qu\u00e9 debe hacer el receptor si fallan las validaciones.</p> <p>RFC de referencia: RFC 7489</p>"},{"location":"seguridad/#proposito-de-dmarc","title":"Prop\u00f3sito de DMARC","text":"<p>DMARC responde a las preguntas:</p> <ol> <li>\u00bfQu\u00e9 hacer si un correo falla SPF o DKIM?</li> <li>\u00bfC\u00f3mo informar al propietario del dominio sobre intentos de suplantaci\u00f3n?</li> </ol>"},{"location":"seguridad/#registro-dmarc-en-dns","title":"Registro DMARC en DNS","text":"<pre><code>_dmarc.ejemplo.com. IN TXT \"v=DMARC1; p=reject; rua=mailto:dmarc@ejemplo.com; ruf=mailto:forensic@ejemplo.com; pct=100\"\n</code></pre> <p>Par\u00e1metros principales:</p> Par\u00e1metro Valores posibles Descripci\u00f3n <code>v</code> DMARC1 Versi\u00f3n del protocolo <code>p</code> none, quarantine, reject Pol\u00edtica para correos que fallan <code>sp</code> none, quarantine, reject Pol\u00edtica para subdominios <code>rua</code> direcci\u00f3n email Direcci\u00f3n para reportes agregados <code>ruf</code> direcci\u00f3n email Direcci\u00f3n para reportes forenses (detallados) <code>pct</code> 0-100 Porcentaje de mensajes a los que aplicar la pol\u00edtica <code>adkim</code> r (relaxed), s (strict) Alineaci\u00f3n DKIM <code>aspf</code> r (relaxed), s (strict) Alineaci\u00f3n SPF"},{"location":"seguridad/#politicas-dmarc","title":"Pol\u00edticas DMARC","text":"none Modo de monitoreo. No aplicar ninguna acci\u00f3n, solo enviar reportes. \u00datil para fase de prueba. quarantine Cuarentena. Enviar a carpeta de spam/cuarentena. reject Rechazo total. El servidor debe rechazar el mensaje directamente."},{"location":"seguridad/#ejemplo-de-implementacion-progresiva","title":"Ejemplo de Implementaci\u00f3n Progresiva","text":"<pre><code># Fase 1: Monitoreo (2-4 semanas)\n_dmarc.ejemplo.com. IN TXT \"v=DMARC1; p=none; rua=mailto:dmarc@ejemplo.com\"\n\n# Fase 2: Cuarentena parcial\n_dmarc.ejemplo.com. IN TXT \"v=DMARC1; p=quarantine; pct=25; rua=mailto:dmarc@ejemplo.com\"\n\n# Fase 3: Pol\u00edtica estricta\n_dmarc.ejemplo.com. IN TXT \"v=DMARC1; p=reject; rua=mailto:dmarc@ejemplo.com; ruf=mailto:forensic@ejemplo.com\"\n</code></pre> <p>Cuidado con Pol\u00edticas Estrictas</p> <p>Antes de configurar <code>p=reject</code>, asegurarse de que:</p> <ul> <li>SPF est\u00e1 configurado correctamente</li> <li>DKIM funciona para todos los flujos de correo</li> <li>Se han analizado los reportes DMARC durante al menos 2 semanas</li> <li>Se han identificado y autorizado todos los servidores leg\u00edtimos</li> </ul>"},{"location":"seguridad/#tabla-comparativa-de-mecanismos","title":"Tabla Comparativa de Mecanismos","text":"Mecanismo Valida Basado en Previene Reportes SPF IP de origen DNS (TXT) Suplantaci\u00f3n de dominio No nativamente DKIM Integridad del mensaje Criptograf\u00eda + DNS Alteraci\u00f3n de contenido No nativamente DMARC SPF + DKIM DNS (TXT) Uso no autorizado del dominio S\u00ed (rua/ruf) TLS Cifrado de tr\u00e1nsito Certificados SSL Interceptaci\u00f3n MITM No"},{"location":"seguridad/#recomendaciones-de-implementacion","title":"Recomendaciones de Implementaci\u00f3n","text":"<p>Lista de Verificaci\u00f3n de Seguridad</p> <p>Nivel B\u00e1sico (m\u00ednimo recomendado):</p> <ul> <li>[x] Configurar certificado SSL/TLS v\u00e1lido</li> <li>[x] Habilitar STARTTLS en todos los puertos</li> <li>[x] Deshabilitar autenticaci\u00f3n sin cifrado</li> <li>[x] Configurar registro SPF b\u00e1sico</li> </ul> <p>Nivel Intermedio:</p> <ul> <li>[x] Implementar DKIM con claves de 2048 bits</li> <li>[x] Configurar DMARC en modo <code>p=none</code></li> <li>[x] Analizar reportes DMARC durante 2-4 semanas</li> <li>[x] Configurar PTR (reverse DNS)</li> </ul> <p>Nivel Avanzado:</p> <ul> <li>[x] DMARC en modo <code>p=reject</code></li> <li>[x] TLS impl\u00edcito en puertos dedicados</li> <li>[x] Rotaci\u00f3n peri\u00f3dica de claves DKIM</li> <li>[x] Monitoreo automatizado de reportes DMARC</li> <li>[x] MTA-STS (SMTP MTA Strict Transport Security)</li> </ul>"},{"location":"seguridad/#herramientas-de-verificacion","title":"Herramientas de Verificaci\u00f3n","text":"<p>Validaci\u00f3n de configuraci\u00f3n:</p> <ul> <li>MXToolbox - Suite completa de herramientas DNS y correo</li> <li>DMARC Analyzer - An\u00e1lisis de reportes DMARC</li> <li>Mail-Tester - Prueba integral de correo saliente</li> </ul> <p>Comandos de diagn\u00f3stico:</p> <pre><code># Verificar registro SPF\ndig ejemplo.com TXT | grep spf\n\n# Verificar DKIM\ndig selector._domainkey.ejemplo.com TXT\n\n# Verificar DMARC\ndig _dmarc.ejemplo.com TXT\n\n# Probar conexi\u00f3n TLS\nopenssl s_client -connect mail.ejemplo.com:587 -starttls smtp\n</code></pre>"},{"location":"seguridad/#proximos-pasos","title":"Pr\u00f3ximos Pasos","text":"<p>Con los mecanismos de seguridad comprendidos:</p> <ul> <li>Revise Administraci\u00f3n para configurar estos mecanismos en Postfix y Dovecot</li> <li>Vuelva a DNS para entender c\u00f3mo publicar registros SPF/DKIM/DMARC</li> </ul>"}]}